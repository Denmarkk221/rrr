name: üöÄ Telegram Multi-Messages

on:
  workflow_dispatch:
    inputs:
      count:
        description: '–°–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–∏—Ç—å?'
        required: false
        default: '10'
      delay:
        description: '–ü–∞—É–∑–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (—Å–µ–∫—É–Ω–¥)'
        required: false
        default: '10'

jobs:
  telegram-blast:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
    - name: üì® –ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
      env:
        BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
      run: |
        echo "üéØ –ù–∞—á–∏–Ω–∞—é –æ—Ç–ø—Ä–∞–≤–∫—É ${{ github.event.inputs.count }} —Å–æ–æ–±—â–µ–Ω–∏–π"
        echo "‚è±Ô∏è  –ò–Ω—Ç–µ—Ä–≤–∞–ª: ${{ github.event.inputs.delay }} —Å–µ–∫—É–Ω–¥"
        
        for i in $(seq 1 ${{ github.event.inputs.count }})
        do
          # –°–æ–∑–¥–∞—ë–º —Å–æ–æ–±—â–µ–Ω–∏–µ
          MESSAGE="üì® –°–æ–æ–±—â–µ–Ω–∏–µ #$i –∏–∑ ${{ github.event.inputs.count }}
          
          üïê –í—Ä–µ–º—è: $(date '+%H:%M:%S')
          üìÖ –î–∞—Ç–∞: $(date '+%d.%m.%Y')
          
          –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç GitHub Actions!
          
          üîÑ –ò–Ω—Ç–µ—Ä–≤–∞–ª: ${{ github.event.inputs.delay }} —Å–µ–∫—É–Ω–¥
          ‚è≥ –°–ª–µ–¥—É—é—â–µ–µ —á–µ—Ä–µ–∑: $(( (${{ github.event.inputs.count }} - i) * ${{ github.event.inputs.delay }} )) —Å–µ–∫—É–Ω–¥"
          
          # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
          curl -s -X POST "https://api.telegram.org/bot$BOT_TOKEN/sendMessage" \
            -d "chat_id=$CHAT_ID" \
            -d "text=$MESSAGE"
          
          echo "[$(date '+%H:%M:%S')] ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ #$i"
          
          # –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
          if [ $i -lt ${{ github.event.inputs.count }} ]; then
            echo "‚è≥ –ñ–¥—É ${{ github.event.inputs.delay }} —Å–µ–∫—É–Ω–¥ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ..."
            sleep ${{ github.event.inputs.delay }}
          fi
        done
        
        echo "üéâ –ì–û–¢–û–í–û! –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ${{ github.event.inputs.count }} —Å–æ–æ–±—â–µ–Ω–∏–π!"
        
        # –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        curl -s -X POST "https://api.telegram.org/bot$BOT_TOKEN/sendMessage" \
          -d "chat_id=$CHAT_ID" \
          -d "text=üéâ –í–°–Å –ó–ê–í–ï–†–®–ï–ù–û!
          
          –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ${{ github.event.inputs.count }} —Å–æ–æ–±—â–µ–Ω–∏–π
          –ò–Ω—Ç–µ—Ä–≤–∞–ª: ${{ github.event.inputs.delay }} —Å–µ–∫—É–Ω–¥
          –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è: $(date '+%H:%M:%S')
          
          –•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! ‚ú®"

    - name: üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞
      run: |
        echo "========================================="
        echo "           üìã –î–ï–¢–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢           "
        echo "========================================="
        echo "üÜî Workflow: ${{ github.workflow }}"
        echo "üî¢ Run ID: ${{ github.run_id }}"
        echo "üì® –°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${{ github.event.inputs.count }}"
        echo "‚è±Ô∏è  –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏: ${{ github.event.inputs.delay }}—Å–µ–∫"
        echo "‚è∞ –û–±—â–µ–µ –≤—Ä–µ–º—è: $(( ${{ github.event.inputs.count }} * ${{ github.event.inputs.delay }} ))—Å–µ–∫"
        echo "‚úÖ –°—Ç–∞—Ç—É—Å: –í–´–ü–û–õ–ù–ï–ù–û –£–°–ü–ï–®–ù–û"
        echo "========================================="
